<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link rel="stylesheet" type="text/css" href="https://cdn.bootcss.com/bootstrap/4.0.0-beta/css/bootstrap.min.css"/>
		<script src="https://cdn.bootcss.com/vue/2.4.4/vue.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="https://cdn.bootcss.com/vue-resource/1.3.4/vue-resource.min.js" type="text/javascript" charset="utf-8"></script>
		<title>Document</title>
	</head>
	<body>
		
		<div id="app" class="col-6">
			<table class="table">
				<thead>
					<tr>
						<th width="50px"></th>
						<th>ID</th>
						<th>用户名</th>
						<th>创建时间</th>
					</tr>
				</thead>
				<tbody>
					<%userList.forEach(function(item,index){%>
					<tr>
						<td><input type="checkbox"/></td>
						<td><%=item.id%></td>
						<td><%=item.name%></td>
						<td><%=moment(item.create_time).format('YYYY-MM-DD HH:mm')%></td>
					</tr>
					<%})%>
				</tbody>
			</table>
			
			<form >
				<div class="form-group">
					<input type="text" class="form-control" v-model="name" name="name" placeholder="用户名"/>
				</div>
				<div class="form-group">
					<input type="text" class="form-control" v-model="password" name="password" placeholder="密码"/>
				</div>
				<div class="form-group">
					<button type="submit" @click.stop.prevent="handleSubmit" class="btn btn-inline btn-info">创建</button>
				</div>
			</form>
	
		</div>

	<script type="text/javascript">
		new Vue({
			el:'#app',
			data:{
				name:'',
				password:''
			},
			methods:{
				handleSubmit:function(){
					this.$http.post('/users',{
                    	name:this.name,
                    	password:this.password
					}).then(function(res){
						window.location.reload()
					}).catch(function(err){
						alert('创建失败')
					})
						

					

				}
			}
		})
	</script>
	</body>
</html>